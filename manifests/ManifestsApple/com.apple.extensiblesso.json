{
    "title": "Extensible Single Sign-On (com.apple.extensiblesso)",
    "description": "The payload that configures an app extension that performs single sign-on (SSO).",
    "properties": {
        "ExtensionIdentifier": {
            "type": "string",
            "title": "Extension Identifier",
            "description": "The bundle identifier of the app extension that performs SSO for the specified URLs.",
            "enum": [
                "com.apple.AppSSOKerberos.KerberosExtension",
                "com.microsoft.azureauthenticator.ssoextension",
                "com.microsoft.CompanyPortalMac.ssoextension"
            ],
            "property_order": 5
        },
        "Type": {
            "type": "string",
            "description": "The type of SSO.",
            "enum": [
                "Credential",
                "Redirect"
            ],
            "property_order": 10
        },
        "TeamIdentifier": {
            "type": "string",
            "title": "Team Identifier",
            "description": "The team identifier of the app extension. This key is required on macOS and ignored elsewhere.",
            "property_order": 15
        },
        "Hosts": {
            "type": "array",
            "items": {
                "type": "string",
                "title": "Hostname / Domain name",
                "description": "A host or domain name, with or without a leading dot."
            },
            "description": "An array of host or domain names that apps can authenticate through the app extension.\n\nRequired for 'Credential' payloads. Ignored for 'Redirect' payloads.\n\nThe system:\n\n- Matches host or domain names case-insensitively\n- Requires that all the host and domain names of all installed Extensible SSO payloads are unique\n\nNote:\nHost names that begin with a \".\" are wildcard suffixes that match all subdomains; otherwise the host name needs be an exact match.",
            "property_order": 20
        },
        "Realm": {
            "type": "string",
            "description": "The realm name for 'Credential' payloads. Use proper capitalization for this value. Ignored for 'Redirect' payloads.",
            "property_order": 25
        },
        "URLs": {
            "type": "array",
            "items": {
                "type": "string",
                "title": "URL",
                "description": "An http or https URL prefix.",
                "pattern": "^https?://.*"
            },
            "title": "URLs",
            "description": "An array of URL prefixes of identity providers where the app extension performs SSO.\n\nRequired for 'Redirect' payloads. Ignored for 'Credential' payloads.\n\nThe URLs need to begin with 'http://' or 'https://'.\n\nThe system:\n\n- Matches scheme and host name case-insensitively\n- Doesn't allow query parameters and URL fragments\n- Requires that the URLs of all installed Extensible SSO payloads are unique",
            "property_order": 30
        },
        "DeniedBundleIdentifiers": {
            "type": "array",
            "items": {
                "type": "string",
                "title": "Bundle Identifier",
                "description": "The bundle identifier of the app."
            },
            "title": "Denied Bundle Identifiers",
            "description": "An array of bundle identifiers of apps that don't use SSO provided by this extension. Available in iOS 15 and later, and macOS 12 and later.",
            "property_order": 35
        },
        "ScreenLockedBehavior": {
            "type": "string",
            "title": "Screen Locked Behavior",
            "default": "Cancel",
            "description": "If set to 'Cancel', the system cancels authentication requests when the screen is locked. If set to 'DoNotHandle', the request continues without SSO instead. This doesn't apply to requests where 'userInterfaceEnabled' is 'false', or for background 'URLSession' requests. Available in iOS 15 and later, and macOS 12 and later.",
            "enum": [
                "Cancel",
                "DoNotHandle"
            ],
            "options": {
                "enum_titles": [
                    "Cancel",
                    "Do Not Handle"
                ]
            },
            "property_order": 40
        },
        "ExtensionData": {
            "type": "object",
            "title": "Kerberos Extension Data",
            "description": "A dictionary of arbitrary data passed through to the app extension.",
            "properties": {
                "allowAutomaticLogin": {
                    "type": "boolean",
                    "title": "Allow Automatic Login",
                    "default": true,
                    "description": "If 'false', the system doesn't allow saving passwords in the keychain."
                },
                "allowPasswordChange": {
                    "type": "boolean",
                    "title": "Allow Password Change",
                    "default": true,
                    "description": "If 'false', the system disables password changes. Available in macOS 10.15 and later."
                },
                "usePlatformSSOTGT": {
                    "type": "boolean",
                    "title": "Use Platform SSO TGT",
                    "default": false,
                    "description": "If 'true', the system requires this configuration uses a TGT from Platform SSO instead of requesting a new one. Available in macOS 13 and later."
                },
                "allowPlatformSSOAuthFallback": {
                    "type": "boolean",
                    "title": "Allow Platform SSO Authentication Fallback",
                    "default": true,
                    "description": "If 'true' and 'usePlatformSSOTGT' is 'true', the system allows the user to manually sign in. Available in macOS 13 and later."
                },
                "performKerberosOnly": {
                    "type": "boolean",
                    "title": "Perform Kerberos Requests Only",
                    "default": false,
                    "description": "If 'true', the Kerberos Extension handles Kerberos requests only. It doesn't check for password expiration, show the password expiration in the menu, check for external password changes, perform password sync, or retrieve the home directory. Available in macOS 13 and later."
                },
                "cacheName": {
                    "type": "string",
                    "title": "Cache Name",
                    "description": "The GSS name of the Kerberos cache to use. Rarely set by an administrator."
                },
                "certificateUUID": {
                    "type": "string",
                    "title": "Certificate UUID",
                    "description": "The PayloadUUID of a PKINIT certificate."
                },
                "credentialBundleIdACL": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "title": "Bundle ID",
                        "description": "Bundle IDs allowed to access the TGT. These values are case sensitive."
                    },
                    "title": "Credential Bundle ID ACL",
                    "description": "A list of bundle IDs allowed to access the ticket-granting ticket (TGT)."
                },
                "credentialUseMode": {
                    "type": "string",
                    "title": "Credential Use Mode",
                    "default": "always",
                    "description": "This setting affects how other processes use the Kerberos Extension credential. Allowed values:\n\n- 'always': The system always uses the credential if the SPN matches the Kerberos Extension 'Hosts' array and the caller hasn't specified another credential. However, the system won't use the credential if the calling app isn't in the 'credentialBundleIDACL'.\n- 'whenNotSpecified': The system only uses the extension credential if the SPN matches the Kerberos Extension 'Hosts' array. However, the system won't use the credential if the calling app isn't in the 'credentialBundleIDACL'.\n- 'kerberosDefault': The system uses the default Kerberos processes to select credentials, and normally uses the default Kerberos credential. This is the same as turning off this capability.\n\nAvailable in macOS 11 and later.",
                    "enum": [
                        "always",
                        "whenNotSpecified",
                        "kerberosDefault"
                    ],
                    "options": {
                        "enum_titles": [
                            "Always",
                            "When Not Specified",
                            "Kerberos Default"
                        ]
                    }
                },
                "customUsernameLabel": {
                    "type": "string",
                    "title": "Custom Username Label",
                    "description": "The custom user name label used in the Kerberos extension instead of \"Username,\" such as \"Company ID\". Available in macOS 11 and later."
                },
                "delayUserSetup": {
                    "type": "boolean",
                    "title": "Delay User Setup",
                    "default": false,
                    "description": "If 'true', the system doesn't prompt the user to setup the Kerberos extension until either the administrator enables it with the 'app-sso' tool or the system receives a Kerberos challenge. Available in macOS 11 and later."
                },
                "helpText": {
                    "type": "string",
                    "title": "Help Text",
                    "description": "The text to display to the user at the bottom of the Kerberos Login Window. You can also use this to display help information or disclaimer text. Available in iOS 14 and later, and macOS 11 and later."
                },
                "isDefaultRealm": {
                    "type": "boolean",
                    "title": "Is Default Realm",
                    "default": false,
                    "description": "Specifies whether this is the default realm if there's more than one Kerberos extension configuration."
                },
                "includeManagedAppsInBundleIdACL": {
                    "type": "boolean",
                    "title": "Include Managed Apps in Bundle ID ACL",
                    "default": false,
                    "description": "If 'true', the Kerberos extension allows only managed apps to access and use the credential. This is in addition to the 'credentialBundleIDACL', if you specify that value. Available in iOS 14 and later, and macOS 12 and later."
                },
                "includeKerberosAppsInBundleIdACL": {
                    "type": "boolean",
                    "title": "Include Kerberos Apps in Bundle ID ACL",
                    "default": false,
                    "description": "If 'true', the Kerberos extension allows the standard Kerberos utilities including 'TicketViewer' and 'klist' to access and use the credential. This is in addition to 'includeManagedAppsInBundleIdACL' or the 'credentialBundleIdACL', if you specify those values. Available in macOS 12 and later."
                },
                "monitorCredentialsCache": {
                    "type": "boolean",
                    "title": "Monitor Credential Cache",
                    "default": true,
                    "description": "If 'false', the system requests the credential on the next matching Kerberos challenge or network state change. If the credential is expired or missing, the system creates a new one. Available in macOS 11 and later."
                },
                "principalName": {
                    "type": "string",
                    "title": "Principal Name",
                    "description": "The principal (username) to use. You don't need to include the realm."
                },
                "preferredKDCs": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "title": "Key Distribution Center",
                        "description": "A host or domain name in the format of [protocol/]hostname[:port][/path]"
                    },
                    "title": "Preferred KDCs",
                    "description": "The ordered list of preferred Key Distribution Centers (KDCs) to use for Kerberos traffic. Use this if the servers aren't discoverable through DNS. If the servers are specified, then the system uses them for both connectivity checks and attempts to use them first for Kerberos traffic. If the servers don't respond, the device falls back to DNS discovery. Format each entry the same as it would be in a 'krb5.conf' file, for example:\n\n- 'adserver1.example.com'\n- 'tcp/adserver1.example.com:88'\n- 'kkdcp://kerberosproxy.example.com:443/kkdcp'",
                    "pattern": "^((kkdcp:\\/\\/)|(tcp\\/))?[^:\\/]+(:\\d+)?(\\/[^:]*)?$"
                },
                "pwChangeURL": {
                    "type": "string",
                    "title": "Password Change URL",
                    "description": "This URL will launch in the user's default web browser when they initiate a password change. Available in macOS 10.15 and later."
                },
                "pwNotificationDays": {
                    "type": "integer",
                    "title": "Password Notification Days",
                    "default": 15,
                    "description": "The number of days prior to password expiration when the system sends a notification of password expiration to the user. Available in macOS 10.15 and later."
                },
                "pwExpireOverride": {
                    "type": "integer",
                    "title": "Password Expiration Override",
                    "description": "The number of days that the system allows using passwords on this domain. For most domains, this calculation is automatic. Available in macOS 10.15 and later."
                },
                "pwReqComplexity": {
                    "type": "boolean",
                    "title": "Password Requirement Complexity",
                    "default": false,
                    "description": "If 'true', the system requires passwords to meet Active Directory's definition of \"complex\". Available in macOS 10.15 and later."
                },
                "pwReqHistory": {
                    "type": "integer",
                    "title": "Password Requirement History",
                    "description": "The number of prior passwords that the system disallows reuse on this domain. Available in macOS 10.15 and later."
                },
                "pwReqLength": {
                    "type": "integer",
                    "title": "Password Requirement Length",
                    "description": "The minimum length of passwords on the domain.Available in macOS 10.15 and later."
                },
                "pwReqMinAge": {
                    "type": "integer",
                    "title": "Password Requirement Minimum Age",
                    "description": "The minimum age of passwords before the system allows changing them on this domain. Available in macOS 10.15 and later."
                },
                "pwReqText": {
                    "type": "string",
                    "title": "Password Requirement Text",
                    "description": "The text version of the domain's password requirements. Only for use if 'pwReqComplexity' or 'pwReqLength' aren't specified. Available in macOS 10.15 and later."
                },
                "replicationTime": {
                    "type": "integer",
                    "title": "Replication Time",
                    "default": 900,
                    "description": "The time, in seconds, required to replicate changes in the Active Directory domain. The Kerberos extension uses this when checking password age after a change. Available in macOS 11 and later."
                },
                "requireTLSForLDAP": {
                    "type": "boolean",
                    "title": "Require TLS for LDAP",
                    "default": false,
                    "description": "Require that LDAP connections use TLS. Available in macOS 11 and later."
                },
                "requireUserPresence": {
                    "type": "boolean",
                    "title": "Require User Presence",
                    "default": false,
                    "description": "If 'true', the system requires the user to provide Touch ID, Face ID or their passcode to access the keychain entry."
                },
                "siteCode": {
                    "type": "string",
                    "title": "Site Code",
                    "description": "The name of the Active Directory site the Kerberos extension should use. Most administrators don't need to modify this value, as the Kerberos extension can normally find the site automatically."
                },
                "syncLocalPassword": {
                    "type": "boolean",
                    "title": "Sync Local Password",
                    "default": false,
                    "description": "If 'false', the system disables password sync. Note that this will not work if the user is logged in with a mobile account. Available in macOS 10.15 and later."
                },
                "useSiteAutoDiscovery": {
                    "type": "boolean",
                    "title": "Use Site Auto Discovery",
                    "default": true,
                    "description": "If 'false', the Kerberos extension doesn't automatically use LDAP and DNS to determine its AD site name."
                },
                "domainRealmMapping": {
                    "type": "object",
                    "description": "A custom domain-realm mapping for Kerberos. The system uses this when the DNS name of hosts doesn't match the realm name. Most administrators don't need to customize this.",
                    "properties": {
                        "Realm": {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "description": "Domains to map to the realm"
                            },
                            "description": "The key should be the name of the realm, and the value is an array of DNS suffixes that map to the realm."
                        }
                    }
                },
                "Enable_SSO_On_All_ManagedApps": {
                    "type": "integer",
                    "title": "Enable SSO on All Managed Apps",
                    "default": 0,
                    "links": [
                        {
                            "rel": "More information",
                            "href": "https://docs.microsoft.com/en-us/azure/active-directory/develop/apple-sso-plugin"
                        }
                    ],
                    "enum": [
                        0,
                        1
                    ],
                    "options": {
                        "enum_titles": [
                            "Disable",
                            "Enable"
                        ]
                    }
                },
                "AppAllowList": {
                    "type": "string",
                    "title": "App Allow List",
                    "description": "Enable SSO for specific apps",
                    "links": [
                        {
                            "rel": "More information",
                            "href": "https://docs.microsoft.com/en-us/azure/active-directory/develop/apple-sso-plugin"
                        }
                    ]
                },
                "AppPrefixAllowList": {
                    "type": "string",
                    "title": "App Prefix Allow List",
                    "description": "Enable SSO for all apps with a specific bundle ID prefix",
                    "links": [
                        {
                            "rel": "More information",
                            "href": "https://docs.microsoft.com/en-us/azure/active-directory/develop/apple-sso-plugin"
                        }
                    ]
                },
                "AppBlockList": {
                    "type": "string",
                    "title": "App Block List",
                    "description": "Disable SSO for specific apps",
                    "links": [
                        {
                            "rel": "More information",
                            "href": "https://docs.microsoft.com/en-us/azure/active-directory/develop/apple-sso-plugin"
                        }
                    ]
                },
                "AppCookieSSOAllowList": {
                    "type": "string",
                    "title": "App Cookie SSO Allow List",
                    "description": "Enable SSO through cookies for a specific application",
                    "links": [
                        {
                            "rel": "More information",
                            "href": "https://docs.microsoft.com/en-us/azure/active-directory/develop/apple-sso-plugin"
                        }
                    ]
                },
                "browser_sso_interaction_enabled": {
                    "type": "integer",
                    "title": "Allow Users to Sign in from Unknown Applications using the Safari Browser",
                    "default": 0,
                    "links": [
                        {
                            "rel": "More information",
                            "href": "https://docs.microsoft.com/en-us/azure/active-directory/develop/apple-sso-plugin"
                        }
                    ],
                    "enum": [
                        0,
                        1
                    ],
                    "options": {
                        "enum_titles": [
                            "Disable",
                            "Enable"
                        ]
                    }
                },
                "browser_sso_disable_mfa": {
                    "type": "integer",
                    "title": "Disable Asking for MFA During Initial Bootstrapping",
                    "default": 0,
                    "links": [
                        {
                            "rel": "More information",
                            "href": "https://docs.microsoft.com/en-us/azure/active-directory/develop/apple-sso-plugin"
                        }
                    ],
                    "enum": [
                        0,
                        1
                    ],
                    "options": {
                        "enum_titles": [
                            "Enable",
                            "Disable"
                        ]
                    }
                },
                "disable_explicit_app_prompt": {
                    "type": "integer",
                    "title": "Disable OAuth2 Application Prompts",
                    "default": 0,
                    "links": [
                        {
                            "rel": "More information",
                            "href": "https://docs.microsoft.com/en-us/azure/active-directory/develop/apple-sso-plugin"
                        }
                    ],
                    "enum": [
                        0,
                        1
                    ],
                    "options": {
                        "enum_titles": [
                            "Enable",
                            "Disable"
                        ]
                    }
                },
                "disable_explicit_app_prompt_and_autologin": {
                    "type": "integer",
                    "title": "Disable OAuth2 Application Prompts and Autologin",
                    "default": 0,
                    "links": [
                        {
                            "rel": "More information",
                            "href": "https://docs.microsoft.com/en-us/azure/active-directory/develop/apple-sso-plugin"
                        }
                    ],
                    "enum": [
                        0,
                        1
                    ],
                    "options": {
                        "enum_titles": [
                            "Enable",
                            "Disable"
                        ]
                    }
                },
                "identityIssuerAutoSelectFilter": {
                    "type": "string",
                    "description": "A string with wildcards that can use used to filter the list of available SmartCards by issuer. e.g \"\\*My CA2\\*\". If there is one remaining, it will be auto-selected. If there more than one remaining, then the list is shorter. Available in macOS 15 and later."
                },
                "allowSmartCard": {
                    "type": "boolean",
                    "default": true,
                    "description": "If 'true', allow the user to switch the user interface to SmartCard mode. Available in macOS 15 and later."
                },
                "allowPassword": {
                    "type": "boolean",
                    "default": true,
                    "description": "If 'true', allow the user to switch the user interface to Password mode. Available in macOS 15 and later."
                },
                "startInSmartCardMode": {
                    "type": "boolean",
                    "default": false,
                    "description": "If 'true', the user interface will start in SmartCard mode. Available in macOS 15 and later."
                }
            },
            "property_order": 45
        },
        "AuthenticationMethod": {
            "type": "string",
            "title": "Authentication Method",
            "description": "The Platform SSO authentication method the extension uses. Requires that the SSO Extension also supports the method. Available in macOS 13 and later, and deprecated in macOS 14.",
            "enum": [
                "Password",
                "UserSecureEnclaveKey"
            ],
            "options": {
                "enum_titles": [
                    "Password",
                    "User Secure Enclave Key"
                ]
            },
            "property_order": 50
        },
        "PlatformSSO": {
            "type": "object",
            "description": "The dictionary to configure Platform SSO.",
            "properties": {
                "AuthenticationMethod": {
                    "type": "string",
                    "description": "The Platform SSO authentication method to use with the extension. Requires that the SSO Extension also support the method.",
                    "enum": [
                        "Password",
                        "UserSecureEnclaveKey",
                        "SmartCard"
                    ]
                },
                "UseSharedDeviceKeys": {
                    "type": "boolean",
                    "default": false,
                    "description": "If 'true', the system uses the same signing and encryption keys for all users. Only supported on the device channel."
                },
                "AccountDisplayName": {
                    "type": "string",
                    "description": "The display name for the account in notifications and authentication requests."
                },
                "LoginFrequency": {
                    "type": "integer",
                    "default": 64800,
                    "description": "The duration, in seconds, until the system requires a full login instead of a refresh. The default value is 64,800 (18 hours). The minimum value is 3600 (1 hour)."
                },
                "EnableCreateUserAtLogin": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enables creating users at the Login Window with an 'AuthenticationMethod' of either 'Password' or 'SmartCard'. Requires that 'UseSharedDeviceKeys' is 'true'."
                },
                "EnableAuthorization": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enables using identity provider accounts at authorization prompts. Requires that 'UseSharedDeviceKeys' is 'true'. The system assigns groups using 'AdministratorGroups', 'AdditionalGroups', or 'AuthorizationGroups'."
                },
                "TokenToUserMapping": {
                    "type": "object",
                    "description": "The attribute mapping to use when creating users, or for authorization.",
                    "properties": {
                        "AccountName": {
                            "type": "string",
                            "description": "The claim name to use for the user's account name."
                        },
                        "FullName": {
                            "type": "string",
                            "description": "The claim name to use for the user's full name."
                        }
                    }
                },
                "NewUserAuthorizationMode": {
                    "type": "string",
                    "description": "The permission to apply to newly created accounts at login. Allowed values:\n\n- 'Standard': The account is a standard user.\n- 'Admin': The system adds the account to the local administrators group.\n- 'Groups': The system assigns groups to the account using 'AdministratorGroups', 'AdditionalGroups', or 'AuthorizationGroups'.\n- 'Temporary': The system uses a temporary session configuration for newly created accounts at login.",
                    "enum": [
                        "Standard",
                        "Admin",
                        "Groups",
                        "Temporary"
                    ]
                },
                "UserAuthorizationMode": {
                    "type": "string",
                    "description": "The permission to apply to an account each time the user authenticates. Allowed values:\n\n- 'Standard': The account is a standard user.\n- 'Admin': The system adds the account to the local administrators group.\n- 'Groups': The system assigns group to the account using 'AdministratorGroups', 'AdditionalGroups', or 'AuthorizationGroups'.",
                    "enum": [
                        "Standard",
                        "Admin",
                        "Groups"
                    ]
                },
                "AdministratorGroups": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "description": "The group name."
                    },
                    "description": "The list of groups to use for administrator access. The system requests membership during authentication."
                },
                "AdditionalGroups": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "description": "The group name."
                    },
                    "description": "The list of created groups that don't have administrator access."
                },
                "AuthorizationGroups": {
                    "type": "object",
                    "description": "The pairing of Authorization Rights to group names. When using this, the system updates the Authorization Right to use the group.",
                    "properties": {
                        "{{key}}": {
                            "type": "string"
                        },
                        "{{value}}": {
                            "type": "string",
                            "description": "The key is an access right value, the value is the group to be associated with that access right."
                        }
                    }
                },
                "FileVaultPolicy": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "description": "* AttemptAuthentication\n    Platform SSO authentication is attempted before proceeding. If offline, unlock will continue\n    if the local account password matches. If online and the credential is incorrect, then a\n    successful Platform SSO authentication is required to proceed, even if taken offline.\n* RequireAuthentication\n    Platform SSO authentication is required before proceeding.  If the device is offline and\n    'AllowOfflineGracePeriod' is enabled, then the offline 'OfflineGracePeriod' is used to determine\n    if the user can proceed or not. If online and the credential is incorrect, then a valid Platform\n    SSO authentication is required to proceed regardless of the 'OfflineGracePeriod'. If the account\n    is not registered for Platform SSO and 'AllowAuthenticationGracePeriod' is enabled, then the\n    'AuthenticationGracePeriod' is used to determine if the user can proceed or not.\n* AllowOfflineGracePeriod\n    Allow the use of the 'OfflineGracePeriod' when 'RequireAuthentication' is enabled.  If\n    'AllowOfflineGracePeriod' is not set, then offline access is denied.\n* AllowAuthenticationGracePeriod\n    Allow the use of the 'AuthenticationGracePeriod' for other local accounts when 'RequireAuthentication'\n    is enabled. The 'AuthenticationGracePeriod' starts when any of the policies have been updated. If\n    'AllowAuthenticationGracePeriod' is not set, then unregistered account access is denied.",
                        "enum": [
                            "AttemptAuthentication",
                            "RequireAuthentication",
                            "AllowOfflineGracePeriod",
                            "AllowAuthenticationGracePeriod"
                        ]
                    },
                    "description": "The policy to apply when using Platform SSO at FileVault unlock on a Mac with Apple silicon. Applies when 'AuthenticationMethod' is 'Password'. Available in macOS 15 and later."
                },
                "LoginPolicy": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "description": "* AttemptAuthentication\n    Platform SSO authentication is attempted before proceeding. If offline, unlock will continue\n    if the local account password matches. If online and the credential is incorrect, then a\n    successful Platform SSO authentication is required to proceed, even if taken offline.\n* RequireAuthentication\n    Platform SSO authentication is required before proceeding.  If the device is offline and\n    'AllowOfflineGracePeriod' is enabled, then the offline 'OfflineGracePeriod' is used to determine\n    if the user can proceed or not. If online and the credential is incorrect, then a valid Platform\n    SSO authentication is required to proceed regardless of the 'OfflineGracePeriod'. If the account\n    is not registered for Platform SSO and 'AllowAuthenticationGracePeriod' is enabled, then the\n    'AuthenticationGracePeriod' is used to determine if the user can proceed or not.\n* AllowOfflineGracePeriod\n    Allow the use of the 'OfflineGracePeriod' when 'RequireAuthentication' is enabled.  If\n    'AllowOfflineGracePeriod' is not set, then offline access is denied.\n* AllowAuthenticationGracePeriod\n    Allow the use of the 'AuthenticationGracePeriod' for other local accounts when 'RequireAuthentication'\n    is enabled. The 'AuthenticationGracePeriod' starts when any of the policies have been updated. If\n    'AllowAuthenticationGracePeriod' is not set, then unregistered account access is denied.",
                        "enum": [
                            "AttemptAuthentication",
                            "RequireAuthentication",
                            "AllowOfflineGracePeriod",
                            "AllowAuthenticationGracePeriod"
                        ]
                    },
                    "description": "The policy to apply when using Platform SSO at the Login Window. Applies when 'AuthenticationMethod' is 'Password'. Available in macOS 15 and later."
                },
                "UnlockPolicy": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "description": "* AttemptAuthentication\n    Platform SSO authentication is attempted before proceeding. If offline, unlock will continue\n    if the local account password matches. If online and the credential is incorrect, then a\n    successful Platform SSO authentication is required to proceed, even if taken offline.\n* RequireAuthentication\n    Platform SSO authentication is required before proceeding.  If the device is offline and\n    'AllowOfflineGracePeriod' is enabled, then the offline 'OfflineGracePeriod' is used to determine\n    if the user can proceed or not. If online and the credential is incorrect, then a valid Platform\n    SSO authentication is required to proceed regardless of the 'OfflineGracePeriod'. If the account\n    is not registered for Platform SSO and 'AllowAuthenticationGracePeriod' is enabled, then the\n    'AuthenticationGracePeriod' is used to determine if the user can proceed or not.\n* AllowOfflineGracePeriod\n    Allow the use of the 'OfflineGracePeriod' when 'RequireAuthentication' is enabled.  If\n    'AllowOfflineGracePeriod' is not set, then offline access is denied.\n* AllowAuthenticationGracePeriod\n    Allow the use of the 'AuthenticationGracePeriod' for other local accounts when 'RequireAuthentication'\n    is enabled. The 'AuthenticationGracePeriod' starts when any of the policies have been updated. If\n    'AllowAuthenticationGracePeriod' is not set, then unregistered account access is denied.\n* AllowTouchIDOrWatchForUnlock\n    Allow TouchID or Watch to unlock the screensaver instead of Platform SSO authentication when\n    'RequireAuthentication' is enabled.",
                        "enum": [
                            "AttemptAuthentication",
                            "RequireAuthentication",
                            "AllowOfflineGracePeriod",
                            "AllowAuthenticationGracePeriod",
                            "AllowTouchIDOrWatchForUnlock"
                        ]
                    },
                    "description": "The policy to apply when using Platform SSO at screensaver unlock. Applies when 'AuthenticationMethod' is 'Password'. Available in macOS 15 and later."
                },
                "OfflineGracePeriod": {
                    "type": "integer",
                    "description": "The amount of time after the last successful Platform SSO login for using a local account password offline. Required when setting 'AllowOfflineGracePeriod'. Available in macOS 15 and later."
                },
                "AuthenticationGracePeriod": {
                    "type": "integer",
                    "description": "The amount of time after receiving or updating a 'FileVaultPolicy', 'LoginPolicy', or 'UnlockPolicy' that the system can use unregistered local accounts. Required when 'AllowAuthenticationGracePeriod' is set. Available in macOS 15 and later."
                },
                "NonPlatformSSOAccounts": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "description": "A local account username."
                    },
                    "description": "The list of local accounts that aren't subject to the 'FileVaultPolicy', 'LoginPolicy', or 'UnlockPolicy'. The accounts don't receive a prompt to register for Platform SSO. Available in macOS 15 and later."
                },
                "AllowDeviceIdentifiersInAttestation": {
                    "type": "boolean",
                    "default": false,
                    "description": "If 'true', the system includes the device UDID and serial number in Platform SSO attestations."
                },
                "EnableCreateFirstUserDuringSetup": {
                    "type": "boolean",
                    "default": true,
                    "description": "If 'true', the device uses Platform SSO to create the first user account on the Mac during 'Setup Assistant'."
                },
                "NewUserAuthenticationMethods": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "description": "An authentication method to use for newly created accounts at login or during 'Setup Assistant'. Allowed values:\n\n- 'Password': The account uses a password for authentication.\n- 'SmartCard': The account uses a smart card for authentication.\n- 'AccessKey': The account uses an access key for authentication.",
                        "enum": [
                            "Password",
                            "SmartCard",
                            "AccessKey"
                        ]
                    },
                    "description": "The set of authentication methods to use for newly created accounts at login or during 'Setup Assistant'. The system uses 'Password' and 'SmartCard' if this key isn't present."
                },
                "AccessKeyTerminalIdentityUUID": {
                    "type": "string",
                    "description": "The 'PayloadUUID' of an identity payload to use as the 'Terminal' identity of the access key. The identity needs to be trusted by the access key. Required if 'NewUserAuthenticationMethods' includes 'AccessKey'. Allowed identity payload types:\n\n- 'com.apple.security.pkcs12'\n- 'com.apple.security.acme'\n- 'com.apple.security.scep'"
                },
                "AllowAccessKeyExpressMode": {
                    "type": "boolean",
                    "default": false,
                    "description": "If 'true', the system uses the access key in express mode, and doesn't require authentication before use."
                },
                "SynchronizeProfilePicture": {
                    "type": "boolean",
                    "default": false,
                    "description": "If 'true', the system requests the user's profile picture from the SSO extension."
                },
                "TemporarySessionQuickLogin": {
                    "type": "boolean",
                    "default": false,
                    "description": "If 'true', the system uses a quicker Authenticated Guest Mode login to Mac behavior. The system erases user data from only select locations in the user home directory after each session completes. Once every eight hours the system erases the full user home directory after a session completes. Turn this on for shared environments that have a high frequency of short sessions."
                },
                "EnableRegistrationDuringSetup": {
                    "type": "boolean",
                    "default": false,
                    "description": "If 'true', the system enables the PlatformSSO registration process during Setup Assistant on devices running macOS 26 and later. Set this key to 'true' when configuring PlatformSSO before enrollment using the 'com.apple.psso.required' error response."
                }
            },
            "property_order": 55
        },
        "RegistrationToken": {
            "type": "string",
            "title": "Registration Token",
            "description": "The token this device uses for registration with Platform SSO. Use it for silent registration with the Identity Provider. Requires that 'AuthenticationMethod' in 'PlatformSSO' isn't empty. Available in macOS 13 and later.",
            "property_order": 60
        }
    }
}